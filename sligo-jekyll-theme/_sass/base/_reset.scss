// =============================================================================
// BASE RESET & FOUNDATION
// =============================================================================

// Modern CSS Reset
*,
*::before,
*::after {
  box-sizing: border-box;
}

* {
  margin: 0;
  padding: 0;
}

html {
  -webkit-text-size-adjust: 100%;
  scroll-behavior: smooth;
  scroll-padding-top: calc(#{$header-height} + 1rem);
}

body {
  min-height: 100vh;
  line-height: $leading-normal;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  text-rendering: optimizeLegibility;
}

img,
picture,
video,
canvas,
svg {
  display: block;
  max-width: 100%;
  height: auto;
}

input,
button,
textarea,
select {
  font: inherit;
}

p,
h1,
h2,
h3,
h4,
h5,
h6 {
  overflow-wrap: break-word;
}

a {
  color: inherit;
  text-decoration: none;
}

ul,
ol {
  list-style: none;
}

button {
  background: none;
  border: none;
  cursor: pointer;
}

// =============================================================================
// BASE TYPOGRAPHY & COLORS (Light Mode Default)
// =============================================================================

body {
  font-family: $font-body;
  font-size: $text-base;
  font-weight: $weight-regular;
  color: var(--color-body);
  background-color: var(--bg-page);
}

// CSS Custom Properties for theming
:root {
  // Light mode (default)
  --color-primary: #{$color-primary};
  --color-primary-hover: #{$color-primary-70};
  --color-secondary: #{$color-secondary};
  --color-secondary-hover: #{$color-secondary-70};
  --color-tertiary: #{$color-tertiary};
  
  --color-headline: #{$color-headline};
  --color-body: #{$color-body};
  --color-muted: #{$color-muted};
  
  --color-error: #{$color-error};
  --color-success: #{$color-success};
  --color-warning: #{$color-warning};
  --color-info: #{$color-info};
  
  --bg-page: #{$bg-page-light};
  --bg-sidebar: #{$bg-sidebar-light};
  --bg-card: #{$bg-card-light};
  --bg-code: #{$bg-code-light};
  --bg-hover: rgba(0, 0, 0, 0.04);
  
  --border-color: #{$border-color-light};
  --shadow: #{$shadow-md};
  
  --code-bg: #{$bg-code-light};
  --code-text: #{$color-headline};
  
  color-scheme: light;
}

// Dark mode
[data-theme="dark"] {
  --color-primary: #{$color-primary-dark};
  --color-primary-hover: #{$color-primary-60};
  --color-secondary: #{$color-secondary-dark};
  --color-secondary-hover: #{$color-secondary-60};
  
  --color-headline: #{$color-headline-dark};
  --color-body: #{$color-body-dark};
  --color-muted: #8B8F9A;
  
  --bg-page: #{$bg-page-dark};
  --bg-sidebar: #{$bg-sidebar-dark};
  --bg-card: #{$bg-card-dark};
  --bg-code: #{$bg-code-dark};
  --bg-hover: rgba(255, 255, 255, 0.06);
  
  --border-color: #{$border-color-dark};
  --shadow: #{$shadow-dark-md};
  
  --code-bg: #{$bg-code-dark};
  --code-text: #E5E7EB;
  
  color-scheme: dark;
}

// System preference dark mode (fallback if no JS)
@media (prefers-color-scheme: dark) {
  :root:not([data-theme="light"]) {
    --color-primary: #{$color-primary-dark};
    --color-primary-hover: #{$color-primary-60};
    --color-secondary: #{$color-secondary-dark};
    --color-secondary-hover: #{$color-secondary-60};
    
    --color-headline: #{$color-headline-dark};
    --color-body: #{$color-body-dark};
    --color-muted: #8B8F9A;
    
    --bg-page: #{$bg-page-dark};
    --bg-sidebar: #{$bg-sidebar-dark};
    --bg-card: #{$bg-card-dark};
    --bg-code: #{$bg-code-dark};
    --bg-hover: rgba(255, 255, 255, 0.06);
    
    --border-color: #{$border-color-dark};
    --shadow: #{$shadow-dark-md};
    
    --code-bg: #{$bg-code-dark};
    --code-text: #E5E7EB;
    
    color-scheme: dark;
  }
}

// =============================================================================
// TYPOGRAPHY STYLES
// =============================================================================

h1, h2, h3, h4, h5, h6 {
  font-family: $font-heading;
  font-weight: $weight-medium;
  color: var(--color-headline);
  line-height: $leading-tight;
  margin-bottom: $space-4;
}

h1 {
  font-size: clamp(#{$text-3xl}, 5vw, #{$text-4xl});
  font-weight: $weight-semibold;
  letter-spacing: -0.02em;
}

h2 {
  font-size: clamp(#{$text-2xl}, 4vw, #{$text-3xl});
  margin-top: $space-10;
  padding-bottom: $space-3;
  border-bottom: 1px solid var(--border-color);
}

h3 {
  font-size: $text-xl;
  margin-top: $space-8;
}

h4 {
  font-size: $text-lg;
  margin-top: $space-6;
}

h5 {
  font-size: $text-base;
  margin-top: $space-6;
}

h6 {
  font-size: $text-sm;
  margin-top: $space-4;
  text-transform: uppercase;
  letter-spacing: 0.05em;
  color: var(--color-muted);
}

// Anchor links on headings
h2, h3, h4, h5, h6 {
  position: relative;
  
  &:hover .heading-anchor {
    opacity: 1;
  }
}

.heading-anchor {
  position: absolute;
  left: -1.5rem;
  color: var(--color-muted);
  font-weight: $weight-regular;
  opacity: 0;
  transition: opacity $transition-fast;
  
  &:hover {
    color: var(--color-primary);
  }
}

p {
  margin-bottom: $space-4;
}

// Links
a {
  color: var(--color-primary);
  text-decoration: none;
  transition: color $transition-fast;
  
  &:hover {
    color: var(--color-primary-hover);
    text-decoration: underline;
  }
}

// Strong/Bold
strong, b {
  font-weight: $weight-semibold;
  color: var(--color-headline);
}

// Emphasis
em, i {
  font-style: italic;
}

// Small text
small {
  font-size: $text-sm;
}

// Selection
::selection {
  background-color: rgba($color-primary, 0.2);
  color: inherit;
}

[data-theme="dark"] ::selection {
  background-color: rgba($color-primary-dark, 0.3);
}
